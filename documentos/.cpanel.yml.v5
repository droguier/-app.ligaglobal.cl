
---
deployment:
  tasks:
    - export REPOSITORY="/home4/eduar109/repositories/git_app_ligaglobal_cl/app.ligaglobal.cl/"
    - export DEPLOYPATH="/home4/eduar109/app.ligaglobal.cl/"
    - rsync -av --exclude='.git' --exclude='.htaccess' $REPOSITORY/app $DEPLOYPATH
    - rsync -av --exclude='.git' --exclude='.htaccess' $REPOSITORY/routes $DEPLOYPATH
    - rsync -av --exclude='.git' --exclude='.htaccess' $REPOSITORY/resources $DEPLOYPATH
    - rsync -av --exclude='.git' --exclude='.htaccess' $REPOSITORY/public/build $DEPLOYPATH
    - cd $DEPLOYPATH
    - composer install --no-dev --optimize-autoloader
    - npm install
    - npm run build